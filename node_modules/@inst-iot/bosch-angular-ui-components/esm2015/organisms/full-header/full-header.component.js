import * as tslib_1 from "tslib";
import { Component, ContentChild, ElementRef, HostListener, Optional, ViewChild } from '@angular/core';
import { ActionNavItemsDirective, MainNavItemsDirective, MetaNavItemsDirective, SubNavItemsDirective } from './navigation/navigation.directive';
import { LogoHeaderDirective, SubBrandHeaderDirective } from './full-header.directive';
import { NavigationEnd, Router } from '@angular/router';
import { filter } from 'rxjs/operators';
let FullHeaderComponent = class FullHeaderComponent {
    constructor(router) {
        this.router = router;
        this.open = false;
        this.opened = false;
        this.fullHeight = null;
    }
    ngOnInit() {
        if (this.router) {
            this.router.events.pipe(filter(event => event instanceof NavigationEnd)).subscribe(event => {
                this.open = false;
            });
        }
    }
    toggle() {
        this.open = !this.open;
        if (this.open) {
            this.opened = true;
        }
    }
    onScroll() {
        const header = this.headerElement.nativeElement;
        const placeholder = this.headerPlaceholderElement.nativeElement;
        const height = header.offsetHeight;
        const isSticky = header.classList.contains('sticky');
        if (!isSticky) {
            this.fullHeight = height;
        }
        if (window.pageYOffset > this.fullHeight && !isSticky) {
            header.classList.add('sticky');
            placeholder.classList.add('sticky');
            placeholder.style.height = this.fullHeight + 'px';
        }
        else if (window.pageYOffset <= this.fullHeight && isSticky) {
            header.classList.remove('sticky');
            placeholder.classList.remove('sticky');
        }
    }
};
tslib_1.__decorate([
    ViewChild('header', { static: true }),
    tslib_1.__metadata("design:type", ElementRef)
], FullHeaderComponent.prototype, "headerElement", void 0);
tslib_1.__decorate([
    ViewChild('placeholder', { static: true }),
    tslib_1.__metadata("design:type", ElementRef)
], FullHeaderComponent.prototype, "headerPlaceholderElement", void 0);
tslib_1.__decorate([
    ContentChild(MainNavItemsDirective, { static: false }),
    tslib_1.__metadata("design:type", MainNavItemsDirective)
], FullHeaderComponent.prototype, "mainNavItems", void 0);
tslib_1.__decorate([
    ContentChild(SubNavItemsDirective, { static: false }),
    tslib_1.__metadata("design:type", SubNavItemsDirective)
], FullHeaderComponent.prototype, "subNavItems", void 0);
tslib_1.__decorate([
    ContentChild(MetaNavItemsDirective, { static: false }),
    tslib_1.__metadata("design:type", MetaNavItemsDirective)
], FullHeaderComponent.prototype, "metaNavItems", void 0);
tslib_1.__decorate([
    ContentChild(ActionNavItemsDirective, { static: false }),
    tslib_1.__metadata("design:type", ActionNavItemsDirective)
], FullHeaderComponent.prototype, "actionNavItems", void 0);
tslib_1.__decorate([
    ContentChild(SubBrandHeaderDirective, { static: false }),
    tslib_1.__metadata("design:type", SubBrandHeaderDirective)
], FullHeaderComponent.prototype, "subBrand", void 0);
tslib_1.__decorate([
    ContentChild(LogoHeaderDirective, { static: false }),
    tslib_1.__metadata("design:type", LogoHeaderDirective)
], FullHeaderComponent.prototype, "customLogo", void 0);
tslib_1.__decorate([
    HostListener('window:scroll'),
    tslib_1.__metadata("design:type", Function),
    tslib_1.__metadata("design:paramtypes", []),
    tslib_1.__metadata("design:returntype", void 0)
], FullHeaderComponent.prototype, "onScroll", null);
FullHeaderComponent = tslib_1.__decorate([
    Component({
        selector: 'rb-full-header',
        template: "<div class=\"header-placeholder\" #placeholder></div>\r\n<header class=\"header\" #header>\r\n  <div class=\"supergraphic bar\"></div>\r\n  <div class=\"header-content limit\">\r\n    <div class=\"logo\" *ngIf=\"customLogo\">\r\n      <ng-container *ngTemplateOutlet=\"customLogo.templateRef\"></ng-container>\r\n    </div>\r\n    <div class=\"logo\" *ngIf=\"!customLogo\">\r\n      <a href=\"https://www.bosch.com/\" target=\"_blank\">\r\n        <img src=\"assets/img/Bosch_EN_LV_RGB.png\" alt=\"Bosch - Invented for life\">\r\n      </a>\r\n    </div>\r\n    <div class=\"sub-brand\" *ngIf=\"subBrand\">\r\n      <div class=\"sub-brand-content\">\r\n        <ng-container *ngTemplateOutlet=\"subBrand.templateRef\"></ng-container>\r\n      </div>\r\n    </div>\r\n    <div class=\"small-nav\">\r\n      <button class=\"toggler\" [class.open]=\"open\" (click)=\"toggle()\">\r\n        <span class=\"bar\"></span>\r\n        <span class=\"bar\"></span>\r\n        <span class=\"bar\"></span>\r\n      </button>\r\n    </div>\r\n    <div class=\"main-nav\" [class.open]=\"open\" [class.opened]=\"opened\" *ngIf=\"mainNavItems\">\r\n      <rb-navigation type=\"main\" [itemsTemplate]=\"mainNavItems\"></rb-navigation>\r\n    </div>\r\n    <div class=\"action-nav\">\r\n      <rb-navigation type=\"action\" [itemsTemplate]=\"actionNavItems\"></rb-navigation>\r\n    </div>\r\n    <div class=\"sub-nav\" [class.open]=\"open\" [class.opened]=\"opened\" *ngIf=\"subNavItems\">\r\n      <rb-navigation type=\"sub\" [itemsTemplate]=\"subNavItems\"></rb-navigation>\r\n    </div>\r\n    <div class=\"meta-nav\" [class.open]=\"open\" [class.opened]=\"opened\" *ngIf=\"metaNavItems\">\r\n      <rb-navigation type=\"meta\" [itemsTemplate]=\"metaNavItems\"></rb-navigation>\r\n    </div>\r\n  </div>\r\n\r\n</header>\r\n"
    }),
    tslib_1.__param(0, Optional()),
    tslib_1.__metadata("design:paramtypes", [Router])
], FullHeaderComponent);
export { FullHeaderComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZnVsbC1oZWFkZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGluc3QtaW90L2Jvc2NoLWFuZ3VsYXItdWktY29tcG9uZW50cy8iLCJzb3VyY2VzIjpbIm9yZ2FuaXNtcy9mdWxsLWhlYWRlci9mdWxsLWhlYWRlci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLFVBQVUsRUFBRSxZQUFZLEVBQVUsUUFBUSxFQUFFLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMvRyxPQUFPLEVBQ0wsdUJBQXVCLEVBQ3ZCLHFCQUFxQixFQUNyQixxQkFBcUIsRUFDckIsb0JBQW9CLEVBQ3JCLE1BQU0sbUNBQW1DLENBQUM7QUFDM0MsT0FBTyxFQUFFLG1CQUFtQixFQUFFLHVCQUF1QixFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFDdkYsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUN4RCxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFPeEMsSUFBYSxtQkFBbUIsR0FBaEMsTUFBYSxtQkFBbUI7SUFpQjlCLFlBQWdDLE1BQWM7UUFBZCxXQUFNLEdBQU4sTUFBTSxDQUFRO1FBZjlDLFNBQUksR0FBRyxLQUFLLENBQUM7UUFDYixXQUFNLEdBQUcsS0FBSyxDQUFDO1FBWWYsZUFBVSxHQUFHLElBQUksQ0FBQztJQUdsQixDQUFDO0lBRUQsUUFBUTtRQUNOLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRTtZQUNmLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FDckIsTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsS0FBSyxZQUFZLGFBQWEsQ0FBQyxDQUNoRCxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsRUFBRTtnQkFDbEIsSUFBSSxDQUFDLElBQUksR0FBRyxLQUFLLENBQUM7WUFDcEIsQ0FBQyxDQUFDLENBQUM7U0FDSjtJQUNILENBQUM7SUFFRCxNQUFNO1FBQ0osSUFBSSxDQUFDLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7UUFDdkIsSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFO1lBQ2IsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7U0FDcEI7SUFDSCxDQUFDO0lBR0QsUUFBUTtRQUNOLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsYUFBYSxDQUFDO1FBQ2hELE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxhQUFhLENBQUM7UUFDaEUsTUFBTSxNQUFNLEdBQUcsTUFBTSxDQUFDLFlBQVksQ0FBQztRQUNuQyxNQUFNLFFBQVEsR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNyRCxJQUFJLENBQUMsUUFBUSxFQUFFO1lBQ2IsSUFBSSxDQUFDLFVBQVUsR0FBRyxNQUFNLENBQUM7U0FDMUI7UUFDRCxJQUFJLE1BQU0sQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLFVBQVUsSUFBSSxDQUFDLFFBQVEsRUFBRTtZQUNyRCxNQUFNLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUMvQixXQUFXLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUNwQyxXQUFXLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztTQUNuRDthQUFNLElBQUksTUFBTSxDQUFDLFdBQVcsSUFBSSxJQUFJLENBQUMsVUFBVSxJQUFJLFFBQVEsRUFBRTtZQUM1RCxNQUFNLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUNsQyxXQUFXLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztTQUN4QztJQUNILENBQUM7Q0FFRixDQUFBO0FBbkRzQztJQUFwQyxTQUFTLENBQUMsUUFBUSxFQUFFLEVBQUMsTUFBTSxFQUFFLElBQUksRUFBQyxDQUFDO3NDQUFnQixVQUFVOzBEQUFDO0FBQ3JCO0lBQXpDLFNBQVMsQ0FBQyxhQUFhLEVBQUUsRUFBQyxNQUFNLEVBQUUsSUFBSSxFQUFDLENBQUM7c0NBQTJCLFVBQVU7cUVBQUM7QUFFekI7SUFBckQsWUFBWSxDQUFDLHFCQUFxQixFQUFFLEVBQUMsTUFBTSxFQUFFLEtBQUssRUFBQyxDQUFDO3NDQUFlLHFCQUFxQjt5REFBQztBQUNyQztJQUFwRCxZQUFZLENBQUMsb0JBQW9CLEVBQUUsRUFBQyxNQUFNLEVBQUUsS0FBSyxFQUFDLENBQUM7c0NBQWMsb0JBQW9CO3dEQUFDO0FBQ2pDO0lBQXJELFlBQVksQ0FBQyxxQkFBcUIsRUFBRSxFQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUMsQ0FBQztzQ0FBZSxxQkFBcUI7eURBQUM7QUFDbEM7SUFBdkQsWUFBWSxDQUFDLHVCQUF1QixFQUFFLEVBQUMsTUFBTSxFQUFFLEtBQUssRUFBQyxDQUFDO3NDQUFpQix1QkFBdUI7MkRBQUM7QUFDeEM7SUFBdkQsWUFBWSxDQUFDLHVCQUF1QixFQUFFLEVBQUMsTUFBTSxFQUFFLEtBQUssRUFBQyxDQUFDO3NDQUFXLHVCQUF1QjtxREFBQztBQUN0QztJQUFuRCxZQUFZLENBQUMsbUJBQW1CLEVBQUUsRUFBQyxNQUFNLEVBQUUsS0FBSyxFQUFDLENBQUM7c0NBQWEsbUJBQW1CO3VEQUFDO0FBeUJwRjtJQURDLFlBQVksQ0FBQyxlQUFlLENBQUM7Ozs7bURBaUI3QjtBQXREVSxtQkFBbUI7SUFKL0IsU0FBUyxDQUFDO1FBQ1QsUUFBUSxFQUFFLGdCQUFnQjtRQUMxQiw2eERBQTJDO0tBQzVDLENBQUM7SUFrQmEsbUJBQUEsUUFBUSxFQUFFLENBQUE7NkNBQWlCLE1BQU07R0FqQm5DLG1CQUFtQixDQXdEL0I7U0F4RFksbUJBQW1CIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBDb250ZW50Q2hpbGQsIEVsZW1lbnRSZWYsIEhvc3RMaXN0ZW5lciwgT25Jbml0LCBPcHRpb25hbCwgVmlld0NoaWxkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7XHJcbiAgQWN0aW9uTmF2SXRlbXNEaXJlY3RpdmUsXHJcbiAgTWFpbk5hdkl0ZW1zRGlyZWN0aXZlLFxyXG4gIE1ldGFOYXZJdGVtc0RpcmVjdGl2ZSxcclxuICBTdWJOYXZJdGVtc0RpcmVjdGl2ZVxyXG59IGZyb20gJy4vbmF2aWdhdGlvbi9uYXZpZ2F0aW9uLmRpcmVjdGl2ZSc7XHJcbmltcG9ydCB7IExvZ29IZWFkZXJEaXJlY3RpdmUsIFN1YkJyYW5kSGVhZGVyRGlyZWN0aXZlIH0gZnJvbSAnLi9mdWxsLWhlYWRlci5kaXJlY3RpdmUnO1xyXG5pbXBvcnQgeyBOYXZpZ2F0aW9uRW5kLCBSb3V0ZXIgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xyXG5pbXBvcnQgeyBmaWx0ZXIgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XHJcblxyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdyYi1mdWxsLWhlYWRlcicsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL2Z1bGwtaGVhZGVyLmNvbXBvbmVudC5odG1sJ1xyXG59KVxyXG5leHBvcnQgY2xhc3MgRnVsbEhlYWRlckNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XHJcblxyXG4gIG9wZW4gPSBmYWxzZTtcclxuICBvcGVuZWQgPSBmYWxzZTtcclxuXHJcbiAgQFZpZXdDaGlsZCgnaGVhZGVyJywge3N0YXRpYzogdHJ1ZX0pIGhlYWRlckVsZW1lbnQ6IEVsZW1lbnRSZWY7XHJcbiAgQFZpZXdDaGlsZCgncGxhY2Vob2xkZXInLCB7c3RhdGljOiB0cnVlfSkgaGVhZGVyUGxhY2Vob2xkZXJFbGVtZW50OiBFbGVtZW50UmVmO1xyXG5cclxuICBAQ29udGVudENoaWxkKE1haW5OYXZJdGVtc0RpcmVjdGl2ZSwge3N0YXRpYzogZmFsc2V9KSBtYWluTmF2SXRlbXM6IE1haW5OYXZJdGVtc0RpcmVjdGl2ZTtcclxuICBAQ29udGVudENoaWxkKFN1Yk5hdkl0ZW1zRGlyZWN0aXZlLCB7c3RhdGljOiBmYWxzZX0pIHN1Yk5hdkl0ZW1zOiBTdWJOYXZJdGVtc0RpcmVjdGl2ZTtcclxuICBAQ29udGVudENoaWxkKE1ldGFOYXZJdGVtc0RpcmVjdGl2ZSwge3N0YXRpYzogZmFsc2V9KSBtZXRhTmF2SXRlbXM6IE1ldGFOYXZJdGVtc0RpcmVjdGl2ZTtcclxuICBAQ29udGVudENoaWxkKEFjdGlvbk5hdkl0ZW1zRGlyZWN0aXZlLCB7c3RhdGljOiBmYWxzZX0pIGFjdGlvbk5hdkl0ZW1zOiBBY3Rpb25OYXZJdGVtc0RpcmVjdGl2ZTtcclxuICBAQ29udGVudENoaWxkKFN1YkJyYW5kSGVhZGVyRGlyZWN0aXZlLCB7c3RhdGljOiBmYWxzZX0pIHN1YkJyYW5kOiBTdWJCcmFuZEhlYWRlckRpcmVjdGl2ZTtcclxuICBAQ29udGVudENoaWxkKExvZ29IZWFkZXJEaXJlY3RpdmUsIHtzdGF0aWM6IGZhbHNlfSkgY3VzdG9tTG9nbzogTG9nb0hlYWRlckRpcmVjdGl2ZTtcclxuXHJcbiAgZnVsbEhlaWdodCA9IG51bGw7XHJcblxyXG4gIGNvbnN0cnVjdG9yKEBPcHRpb25hbCgpIHByaXZhdGUgcm91dGVyOiBSb3V0ZXIpIHtcclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgaWYgKHRoaXMucm91dGVyKSB7XHJcbiAgICAgIHRoaXMucm91dGVyLmV2ZW50cy5waXBlKFxyXG4gICAgICAgIGZpbHRlcihldmVudCA9PiBldmVudCBpbnN0YW5jZW9mIE5hdmlnYXRpb25FbmQpXHJcbiAgICAgICkuc3Vic2NyaWJlKGV2ZW50ID0+IHtcclxuICAgICAgICB0aGlzLm9wZW4gPSBmYWxzZTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB0b2dnbGUoKSB7XHJcbiAgICB0aGlzLm9wZW4gPSAhdGhpcy5vcGVuO1xyXG4gICAgaWYgKHRoaXMub3Blbikge1xyXG4gICAgICB0aGlzLm9wZW5lZCA9IHRydWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBASG9zdExpc3RlbmVyKCd3aW5kb3c6c2Nyb2xsJylcclxuICBvblNjcm9sbCgpIHtcclxuICAgIGNvbnN0IGhlYWRlciA9IHRoaXMuaGVhZGVyRWxlbWVudC5uYXRpdmVFbGVtZW50O1xyXG4gICAgY29uc3QgcGxhY2Vob2xkZXIgPSB0aGlzLmhlYWRlclBsYWNlaG9sZGVyRWxlbWVudC5uYXRpdmVFbGVtZW50O1xyXG4gICAgY29uc3QgaGVpZ2h0ID0gaGVhZGVyLm9mZnNldEhlaWdodDtcclxuICAgIGNvbnN0IGlzU3RpY2t5ID0gaGVhZGVyLmNsYXNzTGlzdC5jb250YWlucygnc3RpY2t5Jyk7XHJcbiAgICBpZiAoIWlzU3RpY2t5KSB7XHJcbiAgICAgIHRoaXMuZnVsbEhlaWdodCA9IGhlaWdodDtcclxuICAgIH1cclxuICAgIGlmICh3aW5kb3cucGFnZVlPZmZzZXQgPiB0aGlzLmZ1bGxIZWlnaHQgJiYgIWlzU3RpY2t5KSB7XHJcbiAgICAgIGhlYWRlci5jbGFzc0xpc3QuYWRkKCdzdGlja3knKTtcclxuICAgICAgcGxhY2Vob2xkZXIuY2xhc3NMaXN0LmFkZCgnc3RpY2t5Jyk7XHJcbiAgICAgIHBsYWNlaG9sZGVyLnN0eWxlLmhlaWdodCA9IHRoaXMuZnVsbEhlaWdodCArICdweCc7XHJcbiAgICB9IGVsc2UgaWYgKHdpbmRvdy5wYWdlWU9mZnNldCA8PSB0aGlzLmZ1bGxIZWlnaHQgJiYgaXNTdGlja3kpIHtcclxuICAgICAgaGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ3N0aWNreScpO1xyXG4gICAgICBwbGFjZWhvbGRlci5jbGFzc0xpc3QucmVtb3ZlKCdzdGlja3knKTtcclxuICAgIH1cclxuICB9XHJcblxyXG59XHJcbiJdfQ==