import * as tslib_1 from "tslib";
import { Inject, Optional, Pipe } from '@angular/core';
import { DEFAULT_ERROR_FORMATTER, ERROR_FORMATTER } from './error-format.model';
/**
 * Formats an error to a string
 */
let ErrorFormatPipe = class ErrorFormatPipe {
    constructor(formatters) {
        if (!formatters) {
            this.formatters = [DEFAULT_ERROR_FORMATTER];
        }
        else {
            this.formatters = formatters.slice();
            this.formatters.push(DEFAULT_ERROR_FORMATTER);
        }
    }
    transform(error, args) {
        if (this.formatters && this.formatters.length) {
            for (let i = 0; i < this.formatters.length; i++) {
                const formatter = this.formatters[i];
                const result = formatter.transform(error);
                if (result !== null) {
                    return result;
                }
            }
        }
        return String(error);
    }
};
ErrorFormatPipe = tslib_1.__decorate([
    Pipe({
        name: 'errorFormat',
        pure: true
    }),
    tslib_1.__param(0, Optional()), tslib_1.__param(0, Inject(ERROR_FORMATTER)),
    tslib_1.__metadata("design:paramtypes", [Array])
], ErrorFormatPipe);
export { ErrorFormatPipe };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXJyb3ItZm9ybWF0LnBpcGUuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AaW5zdC1pb3QvYm9zY2gtYW5ndWxhci11aS1jb21wb25lbnRzLyIsInNvdXJjZXMiOlsibW9sZWN1bGVzL2xvYWRpbmcvZXJyb3ItZm9ybWF0LnBpcGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBaUIsTUFBTSxlQUFlLENBQUM7QUFDdEUsT0FBTyxFQUFFLHVCQUF1QixFQUFFLGVBQWUsRUFBa0IsTUFBTSxzQkFBc0IsQ0FBQztBQUVoRzs7R0FFRztBQUtILElBQWEsZUFBZSxHQUE1QixNQUFhLGVBQWU7SUFHMUIsWUFBaUQsVUFBNEI7UUFDM0UsSUFBSSxDQUFDLFVBQVUsRUFBRTtZQUNmLElBQUksQ0FBQyxVQUFVLEdBQUcsQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO1NBQzdDO2FBQU07WUFDTCxJQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQyxLQUFLLEVBQUUsQ0FBQztZQUNyQyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO1NBQy9DO0lBQ0gsQ0FBQztJQUVELFNBQVMsQ0FBQyxLQUFVLEVBQUUsSUFBVTtRQUM5QixJQUFJLElBQUksQ0FBQyxVQUFVLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLEVBQUU7WUFDN0MsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO2dCQUMvQyxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNyQyxNQUFNLE1BQU0sR0FBRyxTQUFTLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUMxQyxJQUFJLE1BQU0sS0FBSyxJQUFJLEVBQUU7b0JBQ25CLE9BQU8sTUFBTSxDQUFDO2lCQUNmO2FBQ0Y7U0FDRjtRQUNELE9BQU8sTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3ZCLENBQUM7Q0FFRixDQUFBO0FBekJZLGVBQWU7SUFKM0IsSUFBSSxDQUFDO1FBQ0osSUFBSSxFQUFFLGFBQWE7UUFDbkIsSUFBSSxFQUFFLElBQUk7S0FDWCxDQUFDO0lBSWEsbUJBQUEsUUFBUSxFQUFFLENBQUEsRUFBRSxtQkFBQSxNQUFNLENBQUMsZUFBZSxDQUFDLENBQUE7O0dBSHJDLGVBQWUsQ0F5QjNCO1NBekJZLGVBQWUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3QsIE9wdGlvbmFsLCBQaXBlLCBQaXBlVHJhbnNmb3JtIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBERUZBVUxUX0VSUk9SX0ZPUk1BVFRFUiwgRVJST1JfRk9STUFUVEVSLCBFcnJvckZvcm1hdHRlciB9IGZyb20gJy4vZXJyb3ItZm9ybWF0Lm1vZGVsJztcblxuLyoqXG4gKiBGb3JtYXRzIGFuIGVycm9yIHRvIGEgc3RyaW5nXG4gKi9cbkBQaXBlKHtcbiAgbmFtZTogJ2Vycm9yRm9ybWF0JyxcbiAgcHVyZTogdHJ1ZVxufSlcbmV4cG9ydCBjbGFzcyBFcnJvckZvcm1hdFBpcGUgaW1wbGVtZW50cyBQaXBlVHJhbnNmb3JtIHtcbiAgZm9ybWF0dGVyczogRXJyb3JGb3JtYXR0ZXJbXTtcblxuICBjb25zdHJ1Y3RvcihAT3B0aW9uYWwoKSBASW5qZWN0KEVSUk9SX0ZPUk1BVFRFUikgZm9ybWF0dGVyczogRXJyb3JGb3JtYXR0ZXJbXSkge1xuICAgIGlmICghZm9ybWF0dGVycykge1xuICAgICAgdGhpcy5mb3JtYXR0ZXJzID0gW0RFRkFVTFRfRVJST1JfRk9STUFUVEVSXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5mb3JtYXR0ZXJzID0gZm9ybWF0dGVycy5zbGljZSgpO1xuICAgICAgdGhpcy5mb3JtYXR0ZXJzLnB1c2goREVGQVVMVF9FUlJPUl9GT1JNQVRURVIpO1xuICAgIH1cbiAgfVxuXG4gIHRyYW5zZm9ybShlcnJvcjogYW55LCBhcmdzPzogYW55KTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy5mb3JtYXR0ZXJzICYmIHRoaXMuZm9ybWF0dGVycy5sZW5ndGgpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5mb3JtYXR0ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGZvcm1hdHRlciA9IHRoaXMuZm9ybWF0dGVyc1tpXTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gZm9ybWF0dGVyLnRyYW5zZm9ybShlcnJvcik7XG4gICAgICAgIGlmIChyZXN1bHQgIT09IG51bGwpIHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBTdHJpbmcoZXJyb3IpO1xuICB9XG5cbn1cbiJdfQ==