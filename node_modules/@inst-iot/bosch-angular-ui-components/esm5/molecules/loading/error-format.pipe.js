import * as tslib_1 from "tslib";
import { Inject, Optional, Pipe } from '@angular/core';
import { DEFAULT_ERROR_FORMATTER, ERROR_FORMATTER } from './error-format.model';
/**
 * Formats an error to a string
 */
var ErrorFormatPipe = /** @class */ (function () {
    function ErrorFormatPipe(formatters) {
        if (!formatters) {
            this.formatters = [DEFAULT_ERROR_FORMATTER];
        }
        else {
            this.formatters = formatters.slice();
            this.formatters.push(DEFAULT_ERROR_FORMATTER);
        }
    }
    ErrorFormatPipe.prototype.transform = function (error, args) {
        if (this.formatters && this.formatters.length) {
            for (var i = 0; i < this.formatters.length; i++) {
                var formatter = this.formatters[i];
                var result = formatter.transform(error);
                if (result !== null) {
                    return result;
                }
            }
        }
        return String(error);
    };
    ErrorFormatPipe = tslib_1.__decorate([
        Pipe({
            name: 'errorFormat',
            pure: true
        }),
        tslib_1.__param(0, Optional()), tslib_1.__param(0, Inject(ERROR_FORMATTER)),
        tslib_1.__metadata("design:paramtypes", [Array])
    ], ErrorFormatPipe);
    return ErrorFormatPipe;
}());
export { ErrorFormatPipe };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXJyb3ItZm9ybWF0LnBpcGUuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AaW5zdC1pb3QvYm9zY2gtYW5ndWxhci11aS1jb21wb25lbnRzLyIsInNvdXJjZXMiOlsibW9sZWN1bGVzL2xvYWRpbmcvZXJyb3ItZm9ybWF0LnBpcGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBaUIsTUFBTSxlQUFlLENBQUM7QUFDdEUsT0FBTyxFQUFFLHVCQUF1QixFQUFFLGVBQWUsRUFBa0IsTUFBTSxzQkFBc0IsQ0FBQztBQUVoRzs7R0FFRztBQUtIO0lBR0UseUJBQWlELFVBQTRCO1FBQzNFLElBQUksQ0FBQyxVQUFVLEVBQUU7WUFDZixJQUFJLENBQUMsVUFBVSxHQUFHLENBQUMsdUJBQXVCLENBQUMsQ0FBQztTQUM3QzthQUFNO1lBQ0wsSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUMsS0FBSyxFQUFFLENBQUM7WUFDckMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsdUJBQXVCLENBQUMsQ0FBQztTQUMvQztJQUNILENBQUM7SUFFRCxtQ0FBUyxHQUFULFVBQVUsS0FBVSxFQUFFLElBQVU7UUFDOUIsSUFBSSxJQUFJLENBQUMsVUFBVSxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxFQUFFO1lBQzdDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtnQkFDL0MsSUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDckMsSUFBTSxNQUFNLEdBQUcsU0FBUyxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDMUMsSUFBSSxNQUFNLEtBQUssSUFBSSxFQUFFO29CQUNuQixPQUFPLE1BQU0sQ0FBQztpQkFDZjthQUNGO1NBQ0Y7UUFDRCxPQUFPLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUN2QixDQUFDO0lBdkJVLGVBQWU7UUFKM0IsSUFBSSxDQUFDO1lBQ0osSUFBSSxFQUFFLGFBQWE7WUFDbkIsSUFBSSxFQUFFLElBQUk7U0FDWCxDQUFDO1FBSWEsbUJBQUEsUUFBUSxFQUFFLENBQUEsRUFBRSxtQkFBQSxNQUFNLENBQUMsZUFBZSxDQUFDLENBQUE7O09BSHJDLGVBQWUsQ0F5QjNCO0lBQUQsc0JBQUM7Q0FBQSxBQXpCRCxJQXlCQztTQXpCWSxlQUFlIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0LCBPcHRpb25hbCwgUGlwZSwgUGlwZVRyYW5zZm9ybSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgREVGQVVMVF9FUlJPUl9GT1JNQVRURVIsIEVSUk9SX0ZPUk1BVFRFUiwgRXJyb3JGb3JtYXR0ZXIgfSBmcm9tICcuL2Vycm9yLWZvcm1hdC5tb2RlbCc7XG5cbi8qKlxuICogRm9ybWF0cyBhbiBlcnJvciB0byBhIHN0cmluZ1xuICovXG5AUGlwZSh7XG4gIG5hbWU6ICdlcnJvckZvcm1hdCcsXG4gIHB1cmU6IHRydWVcbn0pXG5leHBvcnQgY2xhc3MgRXJyb3JGb3JtYXRQaXBlIGltcGxlbWVudHMgUGlwZVRyYW5zZm9ybSB7XG4gIGZvcm1hdHRlcnM6IEVycm9yRm9ybWF0dGVyW107XG5cbiAgY29uc3RydWN0b3IoQE9wdGlvbmFsKCkgQEluamVjdChFUlJPUl9GT1JNQVRURVIpIGZvcm1hdHRlcnM6IEVycm9yRm9ybWF0dGVyW10pIHtcbiAgICBpZiAoIWZvcm1hdHRlcnMpIHtcbiAgICAgIHRoaXMuZm9ybWF0dGVycyA9IFtERUZBVUxUX0VSUk9SX0ZPUk1BVFRFUl07XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZm9ybWF0dGVycyA9IGZvcm1hdHRlcnMuc2xpY2UoKTtcbiAgICAgIHRoaXMuZm9ybWF0dGVycy5wdXNoKERFRkFVTFRfRVJST1JfRk9STUFUVEVSKTtcbiAgICB9XG4gIH1cblxuICB0cmFuc2Zvcm0oZXJyb3I6IGFueSwgYXJncz86IGFueSk6IHN0cmluZyB7XG4gICAgaWYgKHRoaXMuZm9ybWF0dGVycyAmJiB0aGlzLmZvcm1hdHRlcnMubGVuZ3RoKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZm9ybWF0dGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBmb3JtYXR0ZXIgPSB0aGlzLmZvcm1hdHRlcnNbaV07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGZvcm1hdHRlci50cmFuc2Zvcm0oZXJyb3IpO1xuICAgICAgICBpZiAocmVzdWx0ICE9PSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gU3RyaW5nKGVycm9yKTtcbiAgfVxuXG59XG4iXX0=