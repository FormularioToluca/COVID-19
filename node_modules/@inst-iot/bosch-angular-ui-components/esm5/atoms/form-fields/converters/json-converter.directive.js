import * as tslib_1 from "tslib";
import { Directive, forwardRef } from '@angular/core';
import { CUSTOM_VALUE_CONVERTER } from '../form-input/form-input.component';
var JsonConverterDirective = /** @class */ (function () {
    function JsonConverterDirective() {
    }
    JsonConverterDirective_1 = JsonConverterDirective;
    JsonConverterDirective.prototype.modelToValue = function (model) {
        return JSON.stringify(model);
    };
    JsonConverterDirective.prototype.valueToModel = function (value) {
        try {
            return JSON.parse(value);
        }
        catch (e) {
            console.warn('Could not parse JSON', value, e);
            return null;
        }
    };
    var JsonConverterDirective_1;
    JsonConverterDirective = JsonConverterDirective_1 = tslib_1.__decorate([
        Directive({
            selector: '[rbJsonConverter]',
            providers: [{ provide: CUSTOM_VALUE_CONVERTER, useExisting: forwardRef(function () { return JsonConverterDirective_1; }) }]
        })
    ], JsonConverterDirective);
    return JsonConverterDirective;
}());
export { JsonConverterDirective };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoianNvbi1jb252ZXJ0ZXIuZGlyZWN0aXZlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGluc3QtaW90L2Jvc2NoLWFuZ3VsYXItdWktY29tcG9uZW50cy8iLCJzb3VyY2VzIjpbImF0b21zL2Zvcm0tZmllbGRzL2NvbnZlcnRlcnMvanNvbi1jb252ZXJ0ZXIuZGlyZWN0aXZlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN0RCxPQUFPLEVBQUUsc0JBQXNCLEVBQXdCLE1BQU0sb0NBQW9DLENBQUM7QUFNbEc7SUFBQTtJQWFBLENBQUM7K0JBYlksc0JBQXNCO0lBQ2pDLDZDQUFZLEdBQVosVUFBYSxLQUFVO1FBQ3JCLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUMvQixDQUFDO0lBRUQsNkNBQVksR0FBWixVQUFhLEtBQWE7UUFDeEIsSUFBSTtZQUNGLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUMxQjtRQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQ1YsT0FBTyxDQUFDLElBQUksQ0FBQyxzQkFBc0IsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDL0MsT0FBTyxJQUFJLENBQUM7U0FDYjtJQUNILENBQUM7O0lBWlUsc0JBQXNCO1FBSmxDLFNBQVMsQ0FBQztZQUNULFFBQVEsRUFBRSxtQkFBbUI7WUFDN0IsU0FBUyxFQUFFLENBQUMsRUFBQyxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsV0FBVyxFQUFFLFVBQVUsQ0FBQyxjQUFNLE9BQUEsd0JBQXNCLEVBQXRCLENBQXNCLENBQUMsRUFBQyxDQUFDO1NBQ3RHLENBQUM7T0FDVyxzQkFBc0IsQ0FhbEM7SUFBRCw2QkFBQztDQUFBLEFBYkQsSUFhQztTQWJZLHNCQUFzQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERpcmVjdGl2ZSwgZm9yd2FyZFJlZiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBDVVNUT01fVkFMVUVfQ09OVkVSVEVSLCBDdXN0b21WYWx1ZUNvbnZlcnRlciB9IGZyb20gJy4uL2Zvcm0taW5wdXQvZm9ybS1pbnB1dC5jb21wb25lbnQnO1xyXG5cclxuQERpcmVjdGl2ZSh7XHJcbiAgc2VsZWN0b3I6ICdbcmJKc29uQ29udmVydGVyXScsXHJcbiAgcHJvdmlkZXJzOiBbe3Byb3ZpZGU6IENVU1RPTV9WQUxVRV9DT05WRVJURVIsIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IEpzb25Db252ZXJ0ZXJEaXJlY3RpdmUpfV1cclxufSlcclxuZXhwb3J0IGNsYXNzIEpzb25Db252ZXJ0ZXJEaXJlY3RpdmUgaW1wbGVtZW50cyBDdXN0b21WYWx1ZUNvbnZlcnRlciB7XHJcbiAgbW9kZWxUb1ZhbHVlKG1vZGVsOiBhbnkpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG1vZGVsKTtcclxuICB9XHJcblxyXG4gIHZhbHVlVG9Nb2RlbCh2YWx1ZTogc3RyaW5nKTogYW55IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIHJldHVybiBKU09OLnBhcnNlKHZhbHVlKTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgY29uc29sZS53YXJuKCdDb3VsZCBub3QgcGFyc2UgSlNPTicsIHZhbHVlLCBlKTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdfQ==