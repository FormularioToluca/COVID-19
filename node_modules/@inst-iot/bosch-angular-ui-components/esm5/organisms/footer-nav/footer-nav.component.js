import * as tslib_1 from "tslib";
import { Component, ElementRef, HostListener, Renderer2, ViewChild } from '@angular/core';
var FooterNavComponent = /** @class */ (function () {
    function FooterNavComponent(renderer) {
        this.renderer = renderer;
    }
    FooterNavComponent.prototype.ngOnInit = function () {
        this.checkSticky();
    };
    FooterNavComponent.prototype.ngDoCheck = function () {
        this.checkSticky();
    };
    FooterNavComponent.prototype.onResize = function () {
        this.checkSticky();
    };
    FooterNavComponent.prototype.checkSticky = function () {
        var footer = this.footerEl.nativeElement;
        var footerHeight = footer.offsetHeight;
        var windowHeight = window.innerHeight;
        var bottomBorder = footer.offsetTop + footer.offsetHeight;
        var realContentHeight = document.body.firstElementChild.offsetHeight;
        var sticky = footer.classList.contains('sticky');
        if (!sticky && bottomBorder < windowHeight) {
            this.renderer.addClass(footer, 'sticky');
            this.renderer.setStyle(this.placeholderEl.nativeElement, 'height', footerHeight + 'px');
        }
        else if (sticky && realContentHeight >= windowHeight) {
            this.renderer.removeClass(footer, 'sticky');
        }
    };
    tslib_1.__decorate([
        ViewChild('footer', { static: true }),
        tslib_1.__metadata("design:type", ElementRef)
    ], FooterNavComponent.prototype, "footerEl", void 0);
    tslib_1.__decorate([
        ViewChild('placeholder', { static: true }),
        tslib_1.__metadata("design:type", ElementRef)
    ], FooterNavComponent.prototype, "placeholderEl", void 0);
    tslib_1.__decorate([
        HostListener('window:resize'),
        tslib_1.__metadata("design:type", Function),
        tslib_1.__metadata("design:paramtypes", []),
        tslib_1.__metadata("design:returntype", void 0)
    ], FooterNavComponent.prototype, "onResize", null);
    FooterNavComponent = tslib_1.__decorate([
        Component({
            selector: 'rb-footer-nav',
            template: "<footer #footer>\n  <ng-content></ng-content>\n  <div class=\"supergraphic bar\"></div>\n</footer>\n<div class=\"footer-placeholder\" #placeholder></div>\n"
        }),
        tslib_1.__metadata("design:paramtypes", [Renderer2])
    ], FooterNavComponent);
    return FooterNavComponent;
}());
export { FooterNavComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9vdGVyLW5hdi5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AaW5zdC1pb3QvYm9zY2gtYW5ndWxhci11aS1jb21wb25lbnRzLyIsInNvdXJjZXMiOlsib3JnYW5pc21zL2Zvb3Rlci1uYXYvZm9vdGVyLW5hdi5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVcsVUFBVSxFQUFFLFlBQVksRUFBVSxTQUFTLEVBQUUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBTTNHO0lBS0UsNEJBQW9CLFFBQW1CO1FBQW5CLGFBQVEsR0FBUixRQUFRLENBQVc7SUFDdkMsQ0FBQztJQUVELHFDQUFRLEdBQVI7UUFDRSxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDckIsQ0FBQztJQUVELHNDQUFTLEdBQVQ7UUFDRSxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDckIsQ0FBQztJQUU4QixxQ0FBUSxHQUFSO1FBQzdCLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztJQUNyQixDQUFDO0lBRUQsd0NBQVcsR0FBWDtRQUNFLElBQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDO1FBQzNDLElBQU0sWUFBWSxHQUFHLE1BQU0sQ0FBQyxZQUFZLENBQUM7UUFDekMsSUFBTSxZQUFZLEdBQUcsTUFBTSxDQUFDLFdBQVcsQ0FBQztRQUN4QyxJQUFNLFlBQVksR0FBRyxNQUFNLENBQUMsU0FBUyxHQUFHLE1BQU0sQ0FBQyxZQUFZLENBQUM7UUFDNUQsSUFBTSxpQkFBaUIsR0FBSSxRQUFRLENBQUMsSUFBSSxDQUFDLGlCQUFpQyxDQUFDLFlBQVksQ0FBQztRQUN4RixJQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUVuRCxJQUFJLENBQUMsTUFBTSxJQUFJLFlBQVksR0FBRyxZQUFZLEVBQUU7WUFDMUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1lBQ3pDLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsYUFBYSxFQUFFLFFBQVEsRUFBRSxZQUFZLEdBQUcsSUFBSSxDQUFDLENBQUM7U0FDekY7YUFBTSxJQUFJLE1BQU0sSUFBSSxpQkFBaUIsSUFBSSxZQUFZLEVBQUU7WUFDdEQsSUFBSSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsTUFBTSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1NBQzdDO0lBQ0gsQ0FBQztJQWhDc0M7UUFBdEMsU0FBUyxDQUFDLFFBQVEsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsQ0FBQzswQ0FBVyxVQUFVO3dEQUFDO0lBQ2hCO1FBQTNDLFNBQVMsQ0FBQyxhQUFhLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLENBQUM7MENBQWdCLFVBQVU7NkRBQUM7SUFhdkM7UUFBOUIsWUFBWSxDQUFDLGVBQWUsQ0FBQzs7OztzREFFN0I7SUFsQlUsa0JBQWtCO1FBSjlCLFNBQVMsQ0FBQztZQUNULFFBQVEsRUFBRSxlQUFlO1lBQ3pCLHVLQUEwQztTQUMzQyxDQUFDO2lEQU04QixTQUFTO09BTDVCLGtCQUFrQixDQW9DOUI7SUFBRCx5QkFBQztDQUFBLEFBcENELElBb0NDO1NBcENZLGtCQUFrQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgRG9DaGVjaywgRWxlbWVudFJlZiwgSG9zdExpc3RlbmVyLCBPbkluaXQsIFJlbmRlcmVyMiwgVmlld0NoaWxkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ3JiLWZvb3Rlci1uYXYnLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9mb290ZXItbmF2LmNvbXBvbmVudC5odG1sJ1xyXG59KVxyXG5leHBvcnQgY2xhc3MgRm9vdGVyTmF2Q29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBEb0NoZWNrIHtcclxuXHJcbiAgQFZpZXdDaGlsZCgnZm9vdGVyJywgeyBzdGF0aWM6IHRydWUgfSkgZm9vdGVyRWw6IEVsZW1lbnRSZWY7XHJcbiAgQFZpZXdDaGlsZCgncGxhY2Vob2xkZXInLCB7IHN0YXRpYzogdHJ1ZSB9KSBwbGFjZWhvbGRlckVsOiBFbGVtZW50UmVmO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlbmRlcmVyOiBSZW5kZXJlcjIpIHtcclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgdGhpcy5jaGVja1N0aWNreSgpO1xyXG4gIH1cclxuXHJcbiAgbmdEb0NoZWNrKCkge1xyXG4gICAgdGhpcy5jaGVja1N0aWNreSgpO1xyXG4gIH1cclxuXHJcbiAgQEhvc3RMaXN0ZW5lcignd2luZG93OnJlc2l6ZScpIG9uUmVzaXplKCkge1xyXG4gICAgdGhpcy5jaGVja1N0aWNreSgpO1xyXG4gIH1cclxuXHJcbiAgY2hlY2tTdGlja3koKSB7XHJcbiAgICBjb25zdCBmb290ZXIgPSB0aGlzLmZvb3RlckVsLm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICBjb25zdCBmb290ZXJIZWlnaHQgPSBmb290ZXIub2Zmc2V0SGVpZ2h0O1xyXG4gICAgY29uc3Qgd2luZG93SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gICAgY29uc3QgYm90dG9tQm9yZGVyID0gZm9vdGVyLm9mZnNldFRvcCArIGZvb3Rlci5vZmZzZXRIZWlnaHQ7XHJcbiAgICBjb25zdCByZWFsQ29udGVudEhlaWdodCA9IChkb2N1bWVudC5ib2R5LmZpcnN0RWxlbWVudENoaWxkIGFzIEhUTUxFbGVtZW50KS5vZmZzZXRIZWlnaHQ7XHJcbiAgICBjb25zdCBzdGlja3kgPSBmb290ZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdzdGlja3knKTtcclxuXHJcbiAgICBpZiAoIXN0aWNreSAmJiBib3R0b21Cb3JkZXIgPCB3aW5kb3dIZWlnaHQpIHtcclxuICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyhmb290ZXIsICdzdGlja3knKTtcclxuICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZSh0aGlzLnBsYWNlaG9sZGVyRWwubmF0aXZlRWxlbWVudCwgJ2hlaWdodCcsIGZvb3RlckhlaWdodCArICdweCcpO1xyXG4gICAgfSBlbHNlIGlmIChzdGlja3kgJiYgcmVhbENvbnRlbnRIZWlnaHQgPj0gd2luZG93SGVpZ2h0KSB7XHJcbiAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3MoZm9vdGVyLCAnc3RpY2t5Jyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxufVxyXG4iXX0=