import * as tslib_1 from "tslib";
import { Component, ContentChild, ElementRef, HostListener, Optional, ViewChild } from '@angular/core';
import { ActionNavItemsDirective, MainNavItemsDirective, MetaNavItemsDirective, SubNavItemsDirective } from './navigation/navigation.directive';
import { LogoHeaderDirective, SubBrandHeaderDirective } from './full-header.directive';
import { NavigationEnd, Router } from '@angular/router';
import { filter } from 'rxjs/operators';
var FullHeaderComponent = /** @class */ (function () {
    function FullHeaderComponent(router) {
        this.router = router;
        this.open = false;
        this.opened = false;
        this.fullHeight = null;
    }
    FullHeaderComponent.prototype.ngOnInit = function () {
        var _this = this;
        if (this.router) {
            this.router.events.pipe(filter(function (event) { return event instanceof NavigationEnd; })).subscribe(function (event) {
                _this.open = false;
            });
        }
    };
    FullHeaderComponent.prototype.toggle = function () {
        this.open = !this.open;
        if (this.open) {
            this.opened = true;
        }
    };
    FullHeaderComponent.prototype.onScroll = function () {
        var header = this.headerElement.nativeElement;
        var placeholder = this.headerPlaceholderElement.nativeElement;
        var height = header.offsetHeight;
        var isSticky = header.classList.contains('sticky');
        if (!isSticky) {
            this.fullHeight = height;
        }
        if (window.pageYOffset > this.fullHeight && !isSticky) {
            header.classList.add('sticky');
            placeholder.classList.add('sticky');
            placeholder.style.height = this.fullHeight + 'px';
        }
        else if (window.pageYOffset <= this.fullHeight && isSticky) {
            header.classList.remove('sticky');
            placeholder.classList.remove('sticky');
        }
    };
    tslib_1.__decorate([
        ViewChild('header', { static: true }),
        tslib_1.__metadata("design:type", ElementRef)
    ], FullHeaderComponent.prototype, "headerElement", void 0);
    tslib_1.__decorate([
        ViewChild('placeholder', { static: true }),
        tslib_1.__metadata("design:type", ElementRef)
    ], FullHeaderComponent.prototype, "headerPlaceholderElement", void 0);
    tslib_1.__decorate([
        ContentChild(MainNavItemsDirective, { static: false }),
        tslib_1.__metadata("design:type", MainNavItemsDirective)
    ], FullHeaderComponent.prototype, "mainNavItems", void 0);
    tslib_1.__decorate([
        ContentChild(SubNavItemsDirective, { static: false }),
        tslib_1.__metadata("design:type", SubNavItemsDirective)
    ], FullHeaderComponent.prototype, "subNavItems", void 0);
    tslib_1.__decorate([
        ContentChild(MetaNavItemsDirective, { static: false }),
        tslib_1.__metadata("design:type", MetaNavItemsDirective)
    ], FullHeaderComponent.prototype, "metaNavItems", void 0);
    tslib_1.__decorate([
        ContentChild(ActionNavItemsDirective, { static: false }),
        tslib_1.__metadata("design:type", ActionNavItemsDirective)
    ], FullHeaderComponent.prototype, "actionNavItems", void 0);
    tslib_1.__decorate([
        ContentChild(SubBrandHeaderDirective, { static: false }),
        tslib_1.__metadata("design:type", SubBrandHeaderDirective)
    ], FullHeaderComponent.prototype, "subBrand", void 0);
    tslib_1.__decorate([
        ContentChild(LogoHeaderDirective, { static: false }),
        tslib_1.__metadata("design:type", LogoHeaderDirective)
    ], FullHeaderComponent.prototype, "customLogo", void 0);
    tslib_1.__decorate([
        HostListener('window:scroll'),
        tslib_1.__metadata("design:type", Function),
        tslib_1.__metadata("design:paramtypes", []),
        tslib_1.__metadata("design:returntype", void 0)
    ], FullHeaderComponent.prototype, "onScroll", null);
    FullHeaderComponent = tslib_1.__decorate([
        Component({
            selector: 'rb-full-header',
            template: "<div class=\"header-placeholder\" #placeholder></div>\r\n<header class=\"header\" #header>\r\n  <div class=\"supergraphic bar\"></div>\r\n  <div class=\"header-content limit\">\r\n    <div class=\"logo\" *ngIf=\"customLogo\">\r\n      <ng-container *ngTemplateOutlet=\"customLogo.templateRef\"></ng-container>\r\n    </div>\r\n    <div class=\"logo\" *ngIf=\"!customLogo\">\r\n      <a href=\"https://www.bosch.com/\" target=\"_blank\">\r\n        <img src=\"assets/img/Bosch_EN_LV_RGB.png\" alt=\"Bosch - Invented for life\">\r\n      </a>\r\n    </div>\r\n    <div class=\"sub-brand\" *ngIf=\"subBrand\">\r\n      <div class=\"sub-brand-content\">\r\n        <ng-container *ngTemplateOutlet=\"subBrand.templateRef\"></ng-container>\r\n      </div>\r\n    </div>\r\n    <div class=\"small-nav\">\r\n      <button class=\"toggler\" [class.open]=\"open\" (click)=\"toggle()\">\r\n        <span class=\"bar\"></span>\r\n        <span class=\"bar\"></span>\r\n        <span class=\"bar\"></span>\r\n      </button>\r\n    </div>\r\n    <div class=\"main-nav\" [class.open]=\"open\" [class.opened]=\"opened\" *ngIf=\"mainNavItems\">\r\n      <rb-navigation type=\"main\" [itemsTemplate]=\"mainNavItems\"></rb-navigation>\r\n    </div>\r\n    <div class=\"action-nav\">\r\n      <rb-navigation type=\"action\" [itemsTemplate]=\"actionNavItems\"></rb-navigation>\r\n    </div>\r\n    <div class=\"sub-nav\" [class.open]=\"open\" [class.opened]=\"opened\" *ngIf=\"subNavItems\">\r\n      <rb-navigation type=\"sub\" [itemsTemplate]=\"subNavItems\"></rb-navigation>\r\n    </div>\r\n    <div class=\"meta-nav\" [class.open]=\"open\" [class.opened]=\"opened\" *ngIf=\"metaNavItems\">\r\n      <rb-navigation type=\"meta\" [itemsTemplate]=\"metaNavItems\"></rb-navigation>\r\n    </div>\r\n  </div>\r\n\r\n</header>\r\n"
        }),
        tslib_1.__param(0, Optional()),
        tslib_1.__metadata("design:paramtypes", [Router])
    ], FullHeaderComponent);
    return FullHeaderComponent;
}());
export { FullHeaderComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZnVsbC1oZWFkZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGluc3QtaW90L2Jvc2NoLWFuZ3VsYXItdWktY29tcG9uZW50cy8iLCJzb3VyY2VzIjpbIm9yZ2FuaXNtcy9mdWxsLWhlYWRlci9mdWxsLWhlYWRlci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLFVBQVUsRUFBRSxZQUFZLEVBQVUsUUFBUSxFQUFFLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMvRyxPQUFPLEVBQ0wsdUJBQXVCLEVBQ3ZCLHFCQUFxQixFQUNyQixxQkFBcUIsRUFDckIsb0JBQW9CLEVBQ3JCLE1BQU0sbUNBQW1DLENBQUM7QUFDM0MsT0FBTyxFQUFFLG1CQUFtQixFQUFFLHVCQUF1QixFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFDdkYsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUN4RCxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFPeEM7SUFpQkUsNkJBQWdDLE1BQWM7UUFBZCxXQUFNLEdBQU4sTUFBTSxDQUFRO1FBZjlDLFNBQUksR0FBRyxLQUFLLENBQUM7UUFDYixXQUFNLEdBQUcsS0FBSyxDQUFDO1FBWWYsZUFBVSxHQUFHLElBQUksQ0FBQztJQUdsQixDQUFDO0lBRUQsc0NBQVEsR0FBUjtRQUFBLGlCQVFDO1FBUEMsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFO1lBQ2YsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUNyQixNQUFNLENBQUMsVUFBQSxLQUFLLElBQUksT0FBQSxLQUFLLFlBQVksYUFBYSxFQUE5QixDQUE4QixDQUFDLENBQ2hELENBQUMsU0FBUyxDQUFDLFVBQUEsS0FBSztnQkFDZixLQUFJLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQztZQUNwQixDQUFDLENB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IENvbnRlbnRDaGlsZCwgRWxlbWVudFJlZiwgSG9zdExpc3RlbmVyLCBPbkluaXQsIE9wdGlvbmFsLCBWaWV3Q2hpbGQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHtcclxuICBBY3Rpb25OYXZJdGVtc0RpcmVjdGl2ZSxcclxuICBNYWluTmF2SXRlbXNEaXJlY3RpdmUsXHJcbiAgTWV0YU5hdkl0ZW1zRGlyZWN0aXZlLFxyXG4gIFN1Yk5hdkl0ZW1zRGlyZWN0aXZlXHJcbn0gZnJvbSAnLi9uYXZpZ2F0aW9uL25hdmlnYXRpb24uZGlyZWN0aXZlJztcclxuaW1wb3J0IHsgTG9nb0hlYWRlckRpcmVjdGl2ZSwgU3ViQnJhbmRIZWFkZXJEaXJlY3RpdmUgfSBmcm9tICcuL2Z1bGwtaGVhZGVyLmRpcmVjdGl2ZSc7XHJcbmltcG9ydCB7IE5hdmlnYXRpb25FbmQsIFJvdXRlciB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XHJcbmltcG9ydCB7IGZpbHRlciB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuXHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ3JiLWZ1bGwtaGVhZGVyJyxcclxuICB0ZW1wbGF0ZVVybDogJy4vZnVsbC1oZWFkZXIuY29tcG9uZW50Lmh0bWwnXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBGdWxsSGVhZGVyQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcclxuXHJcbiAgb3BlbiA9IGZhbHNlO1xyXG4gIG9wZW5lZCA9IGZhbHNlO1xyXG5cclxuICBAVmlld0NoaWxkKCdoZWFkZXInLCB7c3RhdGljOiB0cnVlfSkgaGVhZGVyRWxlbWVudDogRWxlbWVudFJlZjtcclxuICBAVmlld0NoaWxkKCdwbGFjZWhvbGRlcicsIHtzdGF0aWM6IHRydWV9KSBoZWFkZXJQbGFjZWhvbGRlckVsZW1lbnQ6IEVsZW1lbnRSZWY7XHJcblxyXG4gIEBDb250ZW50Q2hpbGQoTWFpbk5hdkl0ZW1zRGlyZWN0aXZlLCB7c3RhdGljOiBmYWxzZX0pIG1haW5OYXZJdGVtczogTWFpbk5hdkl0ZW1zRGlyZWN0aXZlO1xyXG4gIEBDb250ZW50Q2hpbGQoU3ViTmF2SXRlbXNEaXJlY3RpdmUsIHtzdGF0aWM6IGZhbHNlfSkgc3ViTmF2SXRlbXM6IFN1Yk5hdkl0ZW1zRGlyZWN0aXZlO1xyXG4gIEBDb250ZW50Q2hpbGQoTWV0YU5hdkl0ZW1zRGlyZWN0aXZlLCB7c3RhdGljOiBmYWxzZX0pIG1ldGFOYXZJdGVtczogTWV0YU5hdkl0ZW1zRGlyZWN0aXZlO1xyXG4gIEBDb250ZW50Q2hpbGQoQWN0aW9uTmF2SXRlbXNEaXJlY3RpdmUsIHtzdGF0aWM6IGZhbHNlfSkgYWN0aW9uTmF2SXRlbXM6IEFjdGlvbk5hdkl0ZW1zRGlyZWN0aXZlO1xyXG4gIEBDb250ZW50Q2hpbGQoU3ViQnJhbmRIZWFkZXJEaXJlY3RpdmUsIHtzdGF0aWM6IGZhbHNlfSkgc3ViQnJhbmQ6IFN1YkJyYW5kSGVhZGVyRGlyZWN0aXZlO1xyXG4gIEBDb250ZW50Q2hpbGQoTG9nb0hlYWRlckRpcmVjdGl2ZSwge3N0YXRpYzogZmFsc2V9KSBjdXN0b21Mb2dvOiBMb2dvSGVhZGVyRGlyZWN0aXZlO1xyXG5cclxuICBmdWxsSGVpZ2h0ID0gbnVsbDtcclxuXHJcbiAgY29uc3RydWN0b3IoQE9wdGlvbmFsKCkgcHJpdmF0ZSByb3V0ZXI6IFJvdXRlcikge1xyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgICBpZiAodGhpcy5yb3V0ZXIpIHtcclxuICAgICAgdGhpcy5yb3V0ZXIuZXZlbnRzLnBpcGUoXHJcbiAgICAgICAgZmlsdGVyKGV2ZW50ID0+IGV2ZW50IGluc3RhbmNlb2YgTmF2aWdhdGlvbkVuZClcclxuICAgICAgKS5zdWJzY3JpYmUoZXZlbnQgPT4ge1xyXG4gICAgICAgIHRoaXMub3BlbiA9IGZhbHNlO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHRvZ2dsZSgpIHtcclxuICAgIHRoaXMub3BlbiA9ICF0aGlzLm9wZW47XHJcbiAgICBpZiAodGhpcy5vcGVuKSB7XHJcbiAgICAgIHRoaXMub3BlbmVkID0gdHJ1ZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIEBIb3N0TGlzdGVuZXIoJ3dpbmRvdzpzY3JvbGwnKVxyXG4gIG9uU2Nyb2xsKCkge1xyXG4gICAgY29uc3QgaGVhZGVyID0gdGhpcy5oZWFkZXJFbGVtZW50Lm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICBjb25zdCBwbGFjZWhvbGRlciA9IHRoaXMuaGVhZGVyUGxhY2Vob2xkZXJFbGVtZW50Lm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICBjb25zdCBoZWlnaHQgPSBoZWFkZXIub2Zmc2V0SGVpZ2h0O1xyXG4gICAgY29uc3QgaXNTdGlja3kgPSBoZWFkZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdzdGlja3knKTtcclxuICAgIGlmICghaXNTdGlja3kpIHtcclxuICAgICAgdGhpcy5mdWxsSGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgfVxyXG4gICAgaWYgKHdpbmRvdy5wYWdlWU9mZnNldCA+IHRoaXMuZnVsbEhlaWdodCAmJiAhaXNTdGlja3kpIHtcclxuICAgICAgaGVhZGVyLmNsYXNzTGlzdC5hZGQoJ3N0aWNreScpO1xyXG4gICAgICBwbGFjZWhvbGRlci5jbGFzc0xpc3QuYWRkKCdzdGlja3knKTtcclxuICAgICAgcGxhY2Vob2xkZXIuc3R5bGUuaGVpZ2h0ID0gdGhpcy5mdWxsSGVpZ2h0ICsgJ3B4JztcclxuICAgIH0gZWxzZSBpZiAod2luZG93LnBhZ2VZT2Zmc2V0IDw9IHRoaXMuZnVsbEhlaWdodCAmJiBpc1N0aWNreSkge1xyXG4gICAgICBoZWFkZXIuY2xhc3NMaXN0LnJlbW92ZSgnc3RpY2t5Jyk7XHJcbiAgICAgIHBsYWNlaG9sZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ3N0aWNreScpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbn1cclxuIl19